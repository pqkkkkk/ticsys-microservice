syntax = "proto3";

package org.pqkkkk.ticsys.grpc.event;

option java_multiple_files = true;
option java_package = "org.pqkkkk.ticsys.grpc.event";
option java_outer_classname = "EventServiceProto";

// Service definition
service EventService {
    rpc ValidateEvent(ValidateEventRequest) returns (ValidateEventResponse);
    rpc ReverseTicketsAndCalculateSubtotal(ReverseTicketsAndCalculateSubtotalRequest)
        returns (ReverseTicketsAndCalculateSubtotalResponse);
}

message ValidateEventRequest {
    int64 event_id = 1;
}
message ValidateEventResponse {
    bool is_valid = 1;
    string message = 2; // Additional information if needed
}
message TicketInOrder {
    int64 ticket_id = 1;
    int32 quantity = 2;
}
message ReverseTicketsAndCalculateSubtotalRequest {
    int64 event_id = 1;
    int64 event_date_id = 2;
    repeated TicketInOrder ticket_in_orders = 3;
}
message ReverseTicketsAndCalculateSubtotalResponse {
    double sub_total = 1;
    string message = 2; // Additional information if needed
    bool is_valid_event = 3;
}